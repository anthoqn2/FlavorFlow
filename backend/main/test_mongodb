# backend/main/test_mongo.py
import os
import django

# Configure Django settings
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "backend.settings")
django.setup()

from djongo import models
from django.db import connections

# Simple test model
class TestMongo(models.Model):
    name = models.CharField(max_length=50)

    class Meta:
        app_label = 'main'  # your app name

# Test function
def test_mongo_connection():
    # Use the 'mongo' database
    db = connections['mongo']

    # Create a test object
    obj = TestMongo(name="MongoTest")
    obj.save(using='mongo')

    # Query objects
    results = TestMongo.objects.using('mongo').all()
    for r in results:
        print(f"Found object: {r.name}")

if __name__ == "__main__":
    test_mongo_connection()
